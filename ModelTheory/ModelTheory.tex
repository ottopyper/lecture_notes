\documentclass[]{article}


\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{parskip}
\usepackage{xcolor}
\usepackage{pagecolor}
\usepackage[margin=1.2in]{geometry}
\usepackage{enumerate}
\usepackage{enumitem}

\usepackage[utf8]{inputenc}
\usepackage[english]{babel}

\usepackage{mathtools}
\DeclarePairedDelimiter\bra{\langle}{\rvert}
\DeclarePairedDelimiter\ket{\lvert}{\rangle}
\DeclarePairedDelimiterX\braket[2]{\langle}{\rangle}{#1 \delimsize\vert #2}

\definecolor{thmcolour}{rgb}{0,0,0}
\definecolor{defcolour}{rgb}{0,0,0}
\definecolor{textcolour}{rgb}{0,0,0}
\definecolor{backgroundcolour}{rgb}{1,1,1}

\pagecolor{backgroundcolour}
\color{textcolour}

\newtheoremstyle{custhm}
{%space above
1em
}{%space below
1em
}{%body font
\color{thmcolour}\em
}{%indent amount
-0em
}{%head font
\bfseries\color{thmcolour}
}{%head punct
}{%after head space
1em
}{%head spec
\thmname{#1}\if\relax\detokenize{#2}\relax:\else\thmnumber{ #2}:\fi\if\relax\detokenize{#3}\relax\else\thmnote{ (#3)}\fi
}

\newtheoremstyle{ex}
{%space above
1em
}{%space below
1em
}{%body font
\color{thmcolour}
}{%indent amount
-0em
}{%head font
\bfseries\color{thmcolour}
}{%head punct
}{%after head space
1em
}{%head spec
\thmname{#1}\if\relax\detokenize{#2}\relax:\else\thmnumber{ #2}:\fi\if\relax\detokenize{#3}\relax\else\thmnote{(#3)}\fi
}

\newtheoremstyle{remark}
{%space above
}{%space below
}{% body font
}{%indent amount
-0em
}{%head font
\bfseries
}{%head punct
}{%after head space
1em
}{%head spec
\if\relax\detokenize{#3}\relax\thmname{#1}:\else\thmname{#3}:\fi
}

\newtheoremstyle{cusdef}
{%space above
1em
}{%space below
1em
}{%body font
\color{defcolour}
}{%indent amount
-0em
}{%head font
\bfseries\color{defcolour}
}{%head punct
}{%after head space
1em
}{%head spec
%if numbered, include number
%if named, include name
\thmname{#1}\if\relax\detokenize{#2}\relax:\else\thmnumber{ #2}:\fi\if\relax\detokenize{#3}\relax\else\thmnote{ (#3)}\fi
}

\theoremstyle{custhm}
\newtheorem{theorem}{Theorem}[section]
\theoremstyle{cusdef}
\newtheorem{defin}[theorem]{Definition}
\theoremstyle{custhm}
\newtheorem{lemma}[theorem]{Lemma}
\theoremstyle{custhm}
\newtheorem{cor}[theorem]{Corollary}

\theoremstyle{custhm}
\newtheorem{prop}[theorem]{Proposition}

\theoremstyle{ex}
\newtheorem{ex}[theorem]{Example}

\theoremstyle{custhm}
\newtheorem*{theorem*}{Theorem}

\theoremstyle{cusdef}
\newtheorem*{defin*}{Definition}

\theoremstyle{remark}
\newtheorem*{remark*}{Remark}


%\marginpar{to describe which lecture it is}

\newcommand{\Na}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\e}{\mathrm{e}}
\newcommand{\ra}{\rightarrow}
\newcommand{\lef}{\left(}
\newcommand{\res}{\right)}
\newcommand{\ie}{\textit{i.e.}}
\newcommand{\eps}{\varepsilon}
\newcommand{\E}{\mathbb{E}}
\newcommand{\suminf}{\sum_{n=0}^{\infty}}
\newcommand{\suminfa}[1]{\sum_{#1=0}^{\infty}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\undf}[1]{\textit{\textbf{#1}}}
\renewcommand{\L}{\mathcal{L}}
\renewcommand{\it}[1]{\textit{#1}}
\newcommand{\M}{\mathcal{M}}
\renewcommand{\phi}{\varphi}
\newcommand{\proves}{\vdash}
\newcommand{\lra}{\leftrightarrow}
\renewcommand{\value}{|\cdot|}
\newcommand{\val}[1]{\left|#1\right|}
\newcommand{\valk}{(K,|\cdot|)}
\renewcommand{\bar}{\overline}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\Th}{\textrm{Th}}

\renewcommand{\lnot}{\neg}
\newcommand{\false}{\bot}
\newcommand{\true}{\top}
\newcommand{\n}{\mathcal{N}}
\newcommand{\N}{\mathcal{N}}
\newcommand{\ac}[1]{\mathcal{#1}}
\newcommand{\acf}{\textrm{ACF}}
\newcommand{\F}{\mathbb{F}}

\title{Model Theory}
\author{Lectures by Gabriel Conant}
\date{}

\begin{document}
	
	\maketitle
	\clearpage
	\tableofcontents
	\clearpage

\marginpar{Lecture 1}
\section{Review of First Order Logic}

A \undf{language} is a set $\L$ of function symbols, relation symbols, and constant symbols. Additionally, each function/relation symbol has an assigned \it{arity} $n\ge 1$.

By convention, we view constant symbols as `function symbols of arity 0'.

An \undf{$\L$-structure} $\mathcal{M}$ consists of:
\begin{itemize}
	\item a non-empty set $M$ (the \undf{universe} of $\mathcal{M}$)
	\item for every function symbol $f$ of arity $n$, a function $f^{\M}:M^n\ra M$
	\item for every relation symbol $R$ of arity $n$, a subset $R^\M\subseteq M^n$
	\item for every constant symbol $c$, an element $c^\M \in M$ (\ie\ identified with the unique element in its image)
\end{itemize}

\undf{Syntax}: we build formulas using symbols in $\L$ along with $$ \land\ \lnot\ \forall\ =\ (\ )\ ,$$and countably many variable symbols.

\undf{$\L$-term}: these are our way of creating new functions by composing the ones we already have.
\begin{itemize}
	\item constant symbols and variables are terms
	\item if $t_1,\dots,t_n$ are terms and $f$ is an $n$-ary function symbol, then $f(t_1,\dots,t_n)$ is a term
\end{itemize}

Given a structure $\M$ and a term $t$, we are going to interpret the term in the structure in exactly the way you might expect. Inductively, define (for appropriate $r$) $t^\M:M^r\ra M$ as:
\begin{itemize}
	\item constant symbol $c$: $c^\M$ (case $r = 0$)
	\item variable $x$: identify function ($r = 1$)
	\item general term $f(t_1,\dots,t_n):\ f^\M(t_1^\M,\dots,t_n^\M)$
\end{itemize}

\undf{$\L$-formulas}: new relations. We have the following \it{atomic} $L$-formulas:
\begin{itemize}
	\item If $t_1$ and $t_2$ are terms, then $(t_1=t_2)$ is a formula
	\item If $R$ is an $n$-ary relation symbol and $t_1,\dots,t_n$ are terms, then $R(t_1,\dots,t_n)$ is a formula
\end{itemize}
We can then create more complicated formulas. Given formulae $\phi$ and $\psi$:
\begin{itemize}
	\item $\lnot\phi$
	\item $(\phi \land \psi)$
	\item $\forall x\phi$ for any variable $x$
\end{itemize}

An occurrence of a variable $x$ is \undf{free} in $\phi$ if $x$ does not occur in the scope of $\forall x$. Otherwise, the occurrence is \undf{bound}.

For instance, if $\phi$ is the statement $\forall x \lnot(f(x)=y)$, $x$ is bound and $y$ is free. 

\undf{Notation}: Given a formula $\phi$, we write $\phi(x_1,\dots,x_n)$ to denote that $x_1,\dots,x_n$ are the free variables of $\phi$.

Given a formula $\phi(x_1,\dots,x_n)$, a structure $\M$, $a_1,\dots,a_n\in M$, we define ``$\bar{a}$ satisfies $\phi$ in $\M$'', written $\M\models\phi(a_1,\dots,a_n)$, as follows:
\begin{itemize}
	\item If $\phi$ is $(t_1 = t_2)$ then $\M\models \phi(\bar{a})$ iff $t_1^\M(\bar{a}) = t_2^\M(\bar{a})$
	\item If $\phi$ is $R(t_1,\dots,t_n)$ then $\M\models\phi(\bar{a})$ iff $(t_1^\M(\bar{a}),\dots,t_n^\M(\bar{a})\in R^\M$
	\item $\M\models (\phi\land\psi)(\bar{a})$ iff $\M \models \phi(\bar{a})$ and $\M\models \psi(\bar{a})$
	\item $\M \models \lnot \phi(\bar{a})$ iff $\M\not\models \phi(\bar{a})$
	\item Suppose $\phi$ is $\forall w \psi(x_1\dots,x_n,w)$. Then $M\models \phi(\bar{a})$ iff for all $b\in M$, $\M\models \psi(\bar{a},b)$
\end{itemize}

We emphasise that the focus of this course will not be on the precise definitions and semantics, so much as the meaning of what we are doing. All we seek is a first order logic that works for us, so that we can use it to do interesting things.

\undf{Abbreviations}: We have \it{global} abbreviations such as
\begin{itemize}
	\item $(\phi\lor\psi)$ is $\lnot(\lnot\phi\land\lnot\psi)$
	\item $(\phi\ra\psi)$ is $(\lnot\phi\lor\psi)$
	\item $(\phi\lra\psi)$ is $(\phi\ra\psi)\land(\psi\ra\phi)$
	\item $\exists x \phi$ is $\lnot\forall x\lnot \phi$
\end{itemize}

We note that the last equivalence in a semantic sense hinges on the assumption that universes are non-empty. Since we will be almost exclusively be studying infinite structures, we will not worry about this.

We also have \it{local} abbreviations, often specific to the language we are studying. For instance, in $\L = \{+,\cdot,<,0,1\}$ (the language of ordered rings):
\begin{itemize}
	\item $x+y$ is $+(x,y)$
	\item $x < y$ is $<(x,y)$
	\item $x \le y$ is $(x<y) \land (x=y)$
	\item $x < y < z$ is $(x < y)\land (y<z)$
	\item $x^2$ is $x\cdot x$
	\item $nx$ is $\underbrace{x+x+\cdots+x}_{n\textrm{ times}}$
\end{itemize}

An \undf{$\L$-sentence} is an $\L$-formula with no free variables. For instance, $\forall x (f(x)\ne y)$ is \it{not} a sentence, but $\exists y\forall x(f(x)\ne y)$ \it{is} a sentence. Sentences can be thought of as actually saying something meaningful.

If $\phi$ is a sentence and $\M$ is a structure, then we have the notion of $\M\models\phi$, ``$\M$ satisfies $\phi$'' or ``$\M$ models $\phi$''.

\begin{defin*}[$L$-theory]
	An \undf{$L$-theory} is a set of $L$-sentences.

Given a theory $T$, we write $\M\models T$ (``$\M$ is a \undf{model} of $T$) if $\M\models\phi$ for all $\phi \in T$.

T is \undf{satisfiable} if it has a model.
\end{defin*}

\undf{Example}: $T = \{\lnot \exists x(x=x)\}$ - this sentence claims there are no elements in the universe. In our setting, this is unsatisfiable (though it is technically a matter of opinion).

Similarly, $\exists x(x=x)$ (``The Axiom of Non-Triviality'') is always satisfied in any $\L$-structure.

\undf{Recall}: $T$ is \undf{consistent} if it does not prove a contradiction (\it{e.g.} $(\phi\land\lnot\phi))$

A consequence of \undf{G{\"o}del's Completeness Theorem} is that a theory is satisfiable iff it is consistent. This is a very important theorem, though we will mostly be focussing on the model theoretic aspect (satisfiability).

\marginpar{Lecture 2}

We now consider a fixed language $\L$.

An $\L$-theory $T$ is \undf{finitely satisfiable} if every finite subset of $T$ is satisfiable. This leads us to one of the most important theorems for getting Model Theory off the ground:

\begin{theorem*}[Compactness Theorem]
An $\L$-theory $T$ satisfiable iff it is finitely satisfiable
\end{theorem*}

Another important theorem of Model Theory is the following.

\begin{theorem*}[Downward Lowenheim-Skolem Theorem]
	Any satisfiable $\L$-theory has a model of cardinality at most $|\L|+\aleph_0$
\end{theorem*}

The proofs of the above are non-examinable; see Part II notes for details.

\begin{theorem*}[(Upward) Lowenheim-Skolem  Theorem]
Suppose $T$ is an $\L$-theory with infinite models. Then $T$ has a model of cardinality $\kappa$ for any $\kappa \ge |\L|+\aleph_0$
\end{theorem*}

We note that by the `cardinality' of a structure we mean the cardinality of its universe.

\begin{proof}
What we need to do here is build a model of this theory, but do it such that it's not just a model of the theory but that it also has some extra properties of our choosing. This is a common technique in model theory.

We want more elements, so we add more symbols to our language and more sentences claiming various properties about these symbols.

Let $\L^\ast = \L \cup \{c_i : i < \kappa\}$ where each $c_i$ is a new constant symbol.

Then let $T^\ast = T\cup \{c_i\ne c_j: i\ne j\}$. Suppose $\Sigma \subset T^\ast$ is finite. Then $\Sigma \subset T\cup\{c_i\ne c_j:i,j\in I\}$ for some finite set $I$.

Let $\M\models T$ be an infinite $\L$-structure. Expand $\M$ to an $\L^{\ast}$ structure $\M^\ast$ by interpreting $c_i^{\M^\ast}$ as distinct elements for $i\in I$, and interpreting $c_i^{\M^\ast}$ for $i\not\in I$ arbitrarily. Note that this is `physically' the same structure, all we have changed is its interpretation.

Then $M^{\ast}\models\Sigma$, so $T$ is finitely satisfiable. Hence by the Compactness Theorem $T^\ast$ is satisfiable. Then by DLST, $T^\ast$ has a model $\mathcal{N}^\ast$ of cardinality at most $|\L^\ast|+\aleph_0 = \kappa$. Moreover, every model has cardinality \it{at least} $\kappa$, so $\mathcal{N}^\ast$ indeed has cardinality $\kappa$.

Then let $\mathcal{N}$ be the reduct of $\mathcal{N}^\ast$ to $\L$ (same universe, different interpretation). Then $\mathcal{N}\models T$ and $|N| = \kappa$.
\end{proof}

\section{Complete Theories}

\begin{defin}[Semantic Entailment]
Let $T$ be an $\L$-theory and $\phi$ an $\L$-sentence. Then $T\models \phi$ (`$T$ \undf{models} $\phi$, `$T$ \undf{implies} $\phi$') if any model of $T$ is also a model of $\phi$.
\end{defin}

\begin{ex}\ 
\begin{enumerate}[label=\arabic*)]
\item $\{\phi,\psi\}\models \phi\land\psi$
\item If $T$ is consistent then $T\models \exists x(x=x)$ (also if it's not consistent). So $\emptyset \models \exists x(x=x)$ since we assume all models are non-empty.
\item Let $T$ be the theory of groups in the language of groups $\L = \{\ast,e\}$.

Then $T\models \forall x\forall y\forall z\left((x\ast y = e\land x\ast z = e)\ra y=z\right)$, since in any group inverses are unique.
\end{enumerate}
\end{ex}

\begin{defin}[Complete Theory]
An $\L$-theory $T$ si \undf{complete} if, for any $\L$-sentence $\phi$, we have $T\models\phi$ or $T\models \neg\phi$.
\end{defin}

\begin{ex}\ 
\begin{enumerate}[label=\arabic*)]
\item The theory of groups is not complete. Consider $\forall x\forall y (x\ast y = y \ast x)$ - this asserts that the group is abelian. Since there are some groups with this property and some without it, then neither $T\models \phi$ nor $T\models \neg\phi$.
\item ZFC is not complete (if it is consistent); consider the Continuum Hypothesis.
\end{enumerate}
\end{ex}

\begin{defin}[Theory of a structure]
	Let $\M$ be an $\L$-structure. The \undf{theory of $\M$} is
	\begin{align*}
	\textrm{Th}(\M) = \textrm{Th}_\L(\M) \coloneqq \{\phi : \phi \textrm{ is an $\L$-sentence and }\M \models \phi\}
	\end{align*}
\end{defin}
Note that $\Th(\M)$ is complete, since for every $\phi$ either $\phi \in \Th(\M)$ or $M\models \not \phi$. However, this makes $\Th(\M)$ complicated as a set; every sentence or its negation is in the set, including many that are pointless or redundant. We want to look for complete theories that have a much more efficient presentation.

\begin{defin}[Elementarily Equivalent]
Two $\L$-structures $\M$ and $\N$ are \undf{elementarily equivalent}, written $\M\equiv \mathcal{N}$ if $\Th(\M) = \Th(\mathcal(N))$.
\end{defin}
Note that $\equiv$ is an equivalence relation on $\L$-structures. To emphasise that this only a discussion of $\L$-structures for a specific language $\L$, we may sometimes write $\equiv_\L$.

\begin{remark*}[Exercise] (Sheet 1 Question 2) Let $T$ be an $\L$-theory. TFAE
\begin{enumerate}[label=\roman*)]
\item $T$ is complete
\item For an $\L$-sentence $\phi$, if $T\not\models \phi$ then $T\models \neg \phi$. We remark that for a model $\M$, $\M\not\models \phi\implies \M\models \neg \phi$, but this is \it{not} the case for \it{theories} in general.
\item Any two models of $T$ are elementarily equivalent.
\end{enumerate}
\end{remark*}
\begin{ex} Let $\L = \emptyset$ and $T = \{ \phi_n:n\ge 2 \}$ where $\phi_n$ is
	\[
	\exists x_1\dots\exists x_n \bigwedge_{i\ne j} x_i\ne x_j
	\]
	$T$ is then the \undf{theory of infinite sets}; its models are all of the infinite $\L$-structures. So, as $\L$-structures, $\N\equiv \Z\equiv \Q\equiv \R\equiv \C\equiv \mathcal{P}(\C) \equiv $ any infinite set.
\end{ex}

\begin{theorem}[Vaught's Test]
Let $T$ be an $\L$-theory such that
\begin{enumerate}[label=\alph*)]
\item $T$ has no finite models
\item $\exists \kappa \ge |\L| +\aleph_0$ such that any two models of $T$ of cardinality $\kappa$ are elementarily equivalent
\end{enumerate}
Then $T$ is complete.
\end{theorem}
\begin{proof}
Suppose $T$ is not complete. Then there is a sentence $\phi$ such that $T\cup\{\neg\phi\}$ is satisfiable, and $T\cup \{\phi\}$ is satisfiable.

By (a), these theories have infinite models. By Lowenheim-Skolem, these theories have models of size $\kappa$. But these are both models of $T$ and hence are elementarily equivalent $\bot$ by (b).
\end{proof}

\marginpar{Lecture 3}

Showing that two structures are elementarily equivalent is often difficult to do directly, so we need to find other ways around it.

\section{Homomorphisms}

Let $\L$ be a language.

\begin{defin}[$\L$-Homomorphism]
Let $\M$ and $\mathcal{N}$ be $\L$-structures. A function $h:M\ra N$ is an \undf{$\L$-homomorphism} if
\begin{enumerate}[label=\roman*)]
	\item for any $n$-ary function symbol $f$ and $a_1,\dots,a_n\in M$
	\[
	h(f^\M(a_1,\dots,a_N)) = f^\N(h(a_1),h(a_2),\dots,h(a_n))
	\]
	\item for any $n$-ary relation symbol $R$ and $a_1,\dots,a_n\in M$
	\[
	(a_1,\dots,a_n)\in R^\M \iff (h(a_1),\dots,h(a_n))\in R^\N
	\]
	\item for any constant symbol $c$, $h(c^\M) = c^\N$.
\end{enumerate}

We write $h:\M\ra\N$ for $\L$-homomorphisms $h$.

If $h$ is also injective, then $h$ is an \undf{$\L$-embedding}. If $h$ is also bijective, then $h$ is an \undf{$\L$-isomorphism}.
\end{defin}

\begin{theorem}[]
Suppose $h:\M\ra\n$ is an $\L$-isomorphism. Then for any $\L$-formula $\phi(x_1,\dots,x_n)$ and $a_1,\dots,a_n\in M$, we have
\[
\M\models\phi(a_1,\dots,a_n)\iff \n\models \phi(h(a_1),\dots,h(a_n))
\]
\end{theorem}
\begin{proof}
Often in situations like this, we will need to induct on the complexity of the formula, with the base case simply being the terms, and then atomic formulae, then all formulae.

\underline{Claim}: For any $\L$-term $t(x_1,\dots,x_n)$ and $a_1,\dots,a_n\in M$
\[
h(t^\M(a_1,\dots,a_n)) = t^\n(h(a_1),\dots,h(a_n))
\]
Proof of claim: induction on terms. If $t$ is a constant symbol $c$, then $h(t^\M) = h(c^\M) = h(c^\n) = t^\N$ since $h$ preserves functions (and thus constant symbols).

If $t$ is a variable $x_1$, then $h(t^\M(a_1)) = h(a_1) = t^\n(h(a_1))$ since variables are interpreted as the identity function.

Let $f$ be an $m$-ary function symbol. Assume the result for terms $t_1,\dots,t_m$ whose free variables are among $x_1,\dots,x_n$. Let $t$ be $f(t_1,\dots,t_m)$. Given $a_1,\dots,a_n\in M$:
\begin{align*}
h(t^\M(\overline{a}) &= h(f^\M(t_1^\M(\overline{a}),\dots,t_m^\M(\overline{a})))\\
&=f^\n(h(t_1^\M(\overline{a})),\dots,h(t_m^\M(\overline{a})))\\
&=f^\n(t_1^\n(h(\overline{a})),\dots,t_m^\n(h(\overline{a})))\\
&=t^\n(h(\overline{a}))
\end{align*}
So the claim is proven. Now we prove the theorem by induction on $\phi$.

\underline{Base case}: $\phi$ is atomic.
\begin{enumerate}[label=\arabic*)]
	\item $\phi$ is $t_1 = t_2$:
	\begin{align*} M\models \phi(\overline{a}) &\iff t_1^\M(\bar{a}) = t_2^\M(\bar{a})\\
		 &\iff h(t_1^\M(\bar{a})) = h(t_2^\M(\bar{a}))\textrm{ ($h$ injective)}\\
		 &\iff t_1^\n(h(\bar{a})) = t_2^\n(h(\bar{a}))\textrm{ (by claim)}\\
		 &\iff \N\models\phi(h(\bar{a}))
	\end{align*}
	\item $\phi$ is $R(t_1,\dots,t_n)$ (Exercise).
\end{enumerate}
\underline{Induction Step}: Assume the result for $\phi$ and $\psi$.

Exercise: check $\phi\land\psi$ and $\neg\phi$.

We will do $\forall x_n \phi(x_1,\dots,x_n)$, with free variables $x_1,\dots,x_{n-1}$. Fix $a_1,\dots,a_{n-1}\in M$.
\begin{align*}
M\models \forall x_n \phi(a_1,\dots,a_{n-1},x_n) &\iff \textrm{ for all }b\in M,\ \M\models \phi(a_1,\dots,a_{n-1},b)\\
&\iff \textrm{ for all }b\in M,\ \n\models \phi(h(a_1),\dots,h(a_{n-1}),h(b))\textrm{ (induction)}\\
&\iff \textrm{ for all }c\in N,\ \n\models \phi(h(a_ 1),\dots,h(a_{n-1}),c)\textrm{ ($h$ surjective)}\\
&\iff \N\models\forall x_n \phi(h(a_1),\dots,h(a_{n-1}),x_n)
\end{align*}
And so we are done. In particular, $\L$-isomorphisms preserve all formulae.
\end{proof}

\begin{remark*}[Notation]
We write $\M \cong \n$ if there is an $\L$-isomorphism $h:\M\ra\n$.
\end{remark*}

\begin{cor}
If $\M\cong \N$ then $\M \equiv \N$.
\end{cor}

Note that, as we can see, $\cong$ is stronger than $\equiv$; $\cong$ says that two structures are more or less the same, whereas $\equiv$ only makes an assertion about first order statements satisfied by the models.

\begin{cor}
$h:\M\ra\N$ is an $\L$-embedding iff for any quantifier-free the conclusion of Theorem 2.2 holds for all quantifier-free formulas $\phi(x_1,\dots,x_n)$. That is to say, $\L$-embeddings preserve all quantifier-free formulas.
\end{cor}
\begin{proof}
$(\implies)$ is done by the proof of 2.2; we only used the surjectivity of $h$ for the quantifier step.
For $(\impliedby)$, see Sheet 1, Question 6.
\end{proof}

An embedding is precisely characterised by preserving quantifier-free formulae. This motivates the question, what about maps that preserve all formulas? We know that isomorphisms will do, but is that all of them? The answer is in fact no, in general.

\begin{defin}[Elementary $L$-Embedding]
$h:\M\ra\N$ is an \undf{elementary $\L$-embedding} if for any $L$-formula $\phi(\bar{x})$ and $\bar{a}$ from $M$, $\M\models \phi(\bar{a})$ iff $\N\models \phi(h(\bar{a}))$.
\end{defin}

Note that isomorphisms are elementary embeddings, but elementary embeddings need not be isomorphisms.

\begin{defin}[Elementary Substructure]
Let $\M$ and $\N$ be $\L$-structures with $M\subset N$. Let $h:M \xhookrightarrow{} N$ be the inclusion map. Then $\M$ is a \undf{substructure} of $\N$ (respectively, \undf{elementary substructure}), written $\M\subset \N$ (respectively $\M\preceq\N$) if $h$ is an $\L$-embedding (respectively, elementary embedding).

Similarly, $\N$ is an \undf{extension} of $\M$ (respectively, \undf{elementary extension}).
\end{defin}	

\begin{remark*}[Note]
If $\M\preceq\N$ then $M\subset N$ and $\M\equiv \N$.
\end{remark*}
\begin{ex}
Let $\M = (2\Z, <)$ and $\N = (\Z, <)$.

Then $\M \subset \N$ and $\M \equiv \N$, but $\M\not\preceq\N$, for instance $\M\models \neg\exists x(0 < x < 2)$, but this is of course untrue for $\N$.

So the inclusion map might be an embedding, but it is not necessarily elementary.
\end{ex}

\marginpar{Lecture 4}

\section{Categoricity}

\underline{Q}: Suppose $\M\equiv\N$. Then is it true that $\M \cong \N$?

\underline{A}: No - \it{e.g.} theory of infinite sets, any two infinite sets are elementarily equivalent but many are obviously not isomorphic. More generally, if $\M$ is infinite then Th$(\M)$ has models of arbitrarily large size.

So a theory with infinite models \it{never} has a unique model up to isomorphism, as models of different cardinalities cannot be isomorphic (since an isomorphism contains a bijection).

\begin{defin}[$\kappa$-categorical]
An $\L$-theory $T$ is \undf{$\kappa$-categorical} if it has a unique model of size $\kappa$ up to isomorphism.
\end{defin}
Our main focus for theories here will be those $T$ that have infinite models and $\kappa \ge |\L| + \aleph_0$.

\begin{ex}\ 
\begin{enumerate}[label=\arabic*)]
	\item Th$(\mathbb{N})$ in $\L = \emptyset$ is $\kappa$-categorical for all $\kappa \ge \aleph_0$ (Sheet 1 \#3)
	\item Th$(\Q,+)$ is $\kappa$-categorical iff $\kappa > \aleph_0$ (related to Sheet 1 \#4)
	\item Th$(\Q,<)$ is $\kappa$-categorical iff $\kappa = \aleph_0$
	\item Th$(\Z,+)$ is $\kappa$-categorical for no $\kappa$
\end{enumerate}
\end{ex}
***Non-Examinable***
\begin{theorem*}[Morley's Theorem (1965)]
Let $T$ be a complete theory in a countable language. If $T$ is $\kappa$-categorical for some $\kappa > \aleph_0$, then it is $\kappa$-categorical for all $\kappa > \aleph_0$.
\end{theorem*}
***End of non-examinable section***

\begin{defin}[Theory of Dense Linear Orders]
Let $\L = \{<\}$ (binary relation) be the language of partial orders. Define \undf{DLO (dense linear orders)} to be the following theory
\begin{itemize}
	\item $\forall x\neg (x < x)$
	\item $\forall x \forall y \forall z ((x < y \land y < z) \ra x < z)$ (partial order)
	\item $\forall x\forall y ((x\ne y) \ra (x < y \lor y < x))$ (linear order)
	\item $\forall x \forall y(x < y \ra \exists z (x < z < y))$ (dense)
	\item $\forall x \exists y \exists z (y < x < z)$ (no endpoints)
\end{itemize}
Note that $(\Q,<)\models$ DLO.
\end{defin}

\begin{theorem}[Cantor, 1895]
DLO is $\aleph_0$-categorical.
\end{theorem}
\begin{proof}
``Back and Forth Construction''.

Fix countable models $\M,\N\models$ DLO. Let $M = \{a_n:n\ge 0\}$ and $N = \{b_n:n\ge 0\}$. With these enumerations we will construct an isomorphism between $\M$ and $\N$.

We will inductively construct a sequence $(h_n)_{n=0}^{\infty}$ of functions such that:
\begin{enumerate}[label=\arabic*)]
	\item $h_n:X_n\ra Y_n$ is an order-preserving bijection, where $X_n\subset M$ and $Y_n\subset N$ are finite
	\item $X_n\subset X_{n+1}$, $Y_n\subset Y_{n+1}$ and $h_n\subset h_{n+1}$
	\item $a_n \in X_n$ and $b_n \in Y_n$
\end{enumerate}
Once we have done this, we will have a sequence of increasing functions with domains and ranges getting bigger and bigger. We can then let $h = \bigcup_{n=0}^{\infty}h_n$. Then $h$ is an order-preserving bijectionfrom $M$ to $N$, which in this language is precisely an $\L$-isomorphism.

\underline{Base case}: Let $X_0 = \{a_0\}$, $Y_0 = \{b_0\}$, and $h_0 = \{(a_0,b_0)\}$; this trivially satisfies all the desired properties.

Now assume we have $h_n:X_n\ra Y_n$ as above.

\underline{Forth}: Construct an order-preserving bijection $h_\ast:X_\ast\ra Y_\ast$ extending $h_n$ with $a_{n+1}\in X_\ast$. Enumerate $X_n = \{x_1,\dots,x_k\}$ such that $x_1 <^\M \dots <^\M x_k$. Let $y_i = h_n(x_i)$. Then $y_1 <^\N \dots <^\N y_k$ since $h_n$ is order-preserving.

Define $h_\ast = h_n \cup \{(a_{n+1},b)\}$ where $b\in N$ is chosen as follows.

\underline{Case 1}: $a_{n+1} = x_i$ for some $i\le k$. Let $b = y_i$.

\underline{Case 2}: $x_k <^\M a_{n+1}$. Choose $b\in N$ such that $y_k <^\N b$.

\underline{Case 3}: $a_{n+1} <^\M x_1$. Choose $b\in N$ such that $b <^\N y_1$.

\underline{Case 4}: $x_i <^\M a_{n+1} <^\M x_{i+1}$ for some $ i < k$. Choose $b \in N$ such that $y_i < ^\N b < ^\N y_{i+1}$.

\underline{Back}: Construct order-preserving $h_{n+1}:X_{n+1}\ra Y_{n+1}$ extending $h_\ast$ such that $b_{n+1}\in Y_{n+1}$; details are an exercise (though it is basically the same as the above).
\end{proof}
\begin{cor}
DLO is a complete theory.
\end{cor}
\begin{proof}
Apply Vaught's Test. Note that DLO clearly has no finite models.

If $\M,\N\models$ DLO are countable then $\M \cong \N$, so $\M \equiv \N$.
\end{proof}

So $(\Q,<) \equiv (\R,<)\equiv $ any dense linear order without endpoints. In particular, any two such orders cannot be distinguished by a first order statement in the language of partial orders.

\begin{remark*}[More Notions]
Let $\L$ be a language. Suppose $\M$ is an $\L$-structure. Fix a collection $(\M_i)_{i\in I}$ of substructures of $\M$. Let $\N = \bigcap_{i\in I}M_i$; assume $N \ne \emptyset$ (this will always happen as along as there are some constant symbols, say). Then we have a canonical $L$-structure $\N$ with universe $N$, by interpreting the language in the only way that makes sense. That is, $f^\N = f^\M |_\N = f^{\M_i} |_\N$, $R^\N = R^\M \cap N^{\alpha(R)} = R^{\M_i}\cap N^{\alpha(R)}$, $c^\N = c^\M = c^{\M_i}$.

Note $\N \subset \M_i$ for all $i\in I$.
\end{remark*}
\begin{defin}[Generated Substructure]
Given a structure $\M$ and a non-empty set $A\subset M$, the \undf{substructure of $\M$ generated by $A$} is the intersection of all substructures of $\M$ containing $A$.
\end{defin}

\begin{defin}[Chain of $\L$-structures]
Let $\alpha$ be a limit ordinal. A collection $(\M_i)_{i<\alpha}$ of $\L$-structures is a \undf{chain} if $\M_i \subset \M_{j}$ for all $i < j$.

If in fact the condition above is strengthened to $\preceq$, then we say it is an \undf{elementary chain}.

If $(M_i)_{i<\alpha}$ is a chain then we have a well-defined structure $\bigcup_{i < \alpha}\M_i$.
\end{defin}

\section{Algebraically Closed Fields}

\begin{remark*}[Recall]
$(K,+,\cdot,0,1)$ is a \undf{field} if $(K,+,0)$ and $(K\backslash\{0\},\cdot,1)$ are abelian groups and $\forall x\forall y\forall z((x\cdot(y+z) = x\cdot y + x\cdot z))$.

$K$ is \undf{algebraically closed} if every non-constant polynomial over $K$ has a root in $K$.
\end{remark*}
Let $\L = \{+,\cdot,0,1\}$, the language of fields.

\begin{defin}[ACF]
The first order $\L$-theory axiomatising algebraically closed fields is known as \undf{ACF} - all the above statements can be given as first order $\L$-sentences.

In particular, this contains the field axioms and for every $d\ge 1$ the claim that every degree $d$ polynomial has a root:
\begin{align*}
\forall v_0\forall v_1\dots\forall v_{d-1}\exists x(x^d + v_{d-1}x^{d-1}+\dots+v_1x+v_0 = 0)
\end{align*}
We take this statement for every $d$, {\it i.e.} we have infinitely many.
\end{defin}
\begin{remark*}
ACF is not complete, since it does not specify characteristic - hence different models are distinguishable by a first order property.
\end{remark*}
\begin{defin}[$\textrm{ACF}_0,\ \textrm{ACF}_p$]
For $n\ge 1$, let $\chi_n$ be the $\L$-sentence
\begin{align*}
	\underbrace{1+1+\dots+1}_{n} = 0
\end{align*}
We then have the theory of algebraically closed fields of characteristic zero, \undf{ACF$_0$}:
\begin{align*}
\acf_0 = \acf\cup\{\neg\chi_n:n\ge1\}
\end{align*}
For a prime $p$, we have $\acf_p = \acf\cup\{\chi_p\}$
\end{defin}

\begin{theorem}
$\acf_0$, $\acf_p$ are $\kappa$-categorical for all $\kappa > \aleph_0$.
\end{theorem}
\begin{proof}
The \undf{transcendence degree} of $K\models\acf$ is the cardinality of the largest algebraically independent susbet of $K$.

For example, trdeg$(\bar{Q}) = 0$, trdeg$(\overline{\Q(\pi)}) = 1$, trdeg$(\C) = 2^{\aleph_0}$, trdeg$(\overline{\Q(x_i)}_{i<\kappa})=\kappa$

\begin{remark*}[Facts]\ 
\begin{enumerate}[label=(\arabic*)]
	\item Suppose $K,L\models\acf$. Then $K\cong L$ iff trdeg$(K)$ = trdeg$(L)$, char$(K)$ = char$(L)$, and $|K| = |L|$
	\item If $K\models \acf$ and $\kappa = $trdeg$(K)$, then $|K| = \aleph_0 + \kappa$
\end{enumerate}
\end{remark*}
\underline{Conclusion}: If $K,L\models \acf_0$ (or $\acf_p$) are uncountable and $|K| = |L|$, then $K\cong L$.
\end{proof}
\begin{cor}
$\acf_0$ and $\acf_p$ are complete.
\end{cor}
\begin{proof}
Vaught's Test.
\end{proof}
\begin{remark*}
$\acf_0$, $\acf_p$ are not $\aleph_0$-categorical.

The countable models are precisely the countable $\acf_p$s of trdeg $n$ for $n\in \N\cup\{\aleph_0\}$.
\end{remark*}

\begin{defin}[Polynomial Map]
Let $K$ be a field. A function $\Phi: K^m\ra K^n$ is a \undf{polynomial map} if
\begin{align*}
\Phi = \big(p_1(x_1,\dots,x_m),p_2(x_1,\dots,x_m),\dots,p_n(x_1,\dots,x_m)\big)
\end{align*}
where $p_i \in K[\bar{x}]$ for each $i$.
\end{defin}
\begin{theorem}[Ax-Grothendieck]
Let $K\models \acf$ and suppose $\Phi:K^n\ra K^n$ is an injective polynomial map. Then $\Phi$ is surjective.
\end{theorem}
\begin{proof}
First, suppose that $K = \bar{\mathbb{F}}_p$ for some prime $p$. Recall that $\bar{\mathbb{F}}_p = \bigcup_k \mathbb{F}_{p^k}$. Fix $m$ such that all coefficients in $\Phi$ come from $\mathbb{F}_{p^m}$. Note that $\bar{\mathbb{F}}_p = \bigcup_k \mathbb{F}_{p^{km}}$.

Then for any $k\ge 1$, $\Phi$ induces an injective polynomial map from $\mathbb{F}_{p^{km}}^n \ra \mathbb{F}_{p^{km}}^n$m , which therefore is surjective since the sets we are dealing with are finite.
\begin{align*}
\Phi\left(\bar{\mathbb{F}}_p^n\right) &= \Phi\left(\bigcup_k\mathbb{F}_{p^{km}}^n\right)\\
&= \bigcup_k\Phi\left(\mathbb{F}_{p^{km}}^n\right) = \bigcup_k\mathbb{F}_{p^{km}}^n\\
&=\bar{\mathbb{F}}_p^n
\end{align*}
Now, given $n,d\ge 1$, let $\psi_{n,d}$ be the $\L$-sentence which says:

``Every injective polynomial map with $n$ coordinates, each of which is a polynomial in $n$ variables and degree $\le d$, is surjective.''

Exercise: show that this is first order.
\end{proof}

We've shown $\bar{\F}_p \models \psi_{n,d}$ for all primes $p$ and $n,d$.

So for any prime $p$, $\acf_p\models\psi_{n,d}$ for all $n,d$ since $\acf_p$ is complete.

Now consider $\acf_0$. For contradiction, suppose that there exists soem $n,d$ such that $\acf_0\not\models\psi_{n,d}$. Then $\acf_0\models\neg\psi_{n,d}$ since $\acf_0$ is complete. By Compactness, there is a finite set $\Sigma\subset \acf_0$ such that $\sigma \models \neg \psi_{n,d}$. So $\Sigma\subset \acf\cup\{\neg\chi_1,\dots,\neg\chi_m\}$ for some $m$. Choose a prime $p > m$. Then $\acf_p\models \Sigma$.

So $\acf_p\models \neg\psi_{n,d}$, which is a contradiction.
\begin{theorem*}[Lefschetz Principle]
Let $\phi$ be an $\L$-sentence. TFAE
\begin{enumerate}[label=(\arabic*)]
	\item $\acf_0\models \phi$ {\it i.e.} $\phi$ is true in every $K\models \acf$
	\item $\acf_0\cup\{\phi\}$ is consistent, {\it i.e.} $\phi$ is true in some $K\models \acf_0$
	\item There is some $n > 0$ such that $\acf_p\models\phi$ for all $p > n$ {\it i.e.} $\phi$ is true in every $K\models \acf$ of sufficiently large characteristic
	\item For all $n > 0$ there exists $p > n$ such that $\acf_p\cup\{\phi\}$ is consistent, {\it i.e.} $\phi$ is true in some $K\models \acf$ of arbitrarily large characteristic.
\end{enumerate}
\end{theorem*}
\end{document}